<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billing & Account Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Company Selection Screen -->
    <div id="companySelectionScreen" class="screen active">
        <div class="company-selection-container">
            <div class="logo-header">
                <i class="fas fa-building"></i>
                <h1>Billing & Account Management</h1>
            </div>
            <div class="company-list" id="companyList"></div>
            <button class="btn btn-primary" onclick="showAddCompanyModal()">
                <i class="fas fa-plus"></i> Add New Company
            </button>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="screen">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2 id="currentCompanyName">Company Name</h2>
                <button class="btn-icon" onclick="showCompanySwitch()" title="Switch Company">
                    <i class="fas fa-exchange-alt"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" onclick="showContentScreen('dashboard')">
                    <i class="fas fa-chart-line"></i> Dashboard
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('products')">
                    <i class="fas fa-box"></i> Products
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('clients')">
                    <i class="fas fa-users"></i> Clients
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('vendors')">
                    <i class="fas fa-user-tie"></i> Vendors
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('sales')">
                    <i class="fas fa-shopping-cart"></i> Sales Invoice
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('purchase')">
                    <i class="fas fa-truck"></i> Purchase
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('payments')">
                    <i class="fas fa-money-bill-wave"></i> Payments
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('reports')">
                    <i class="fas fa-file-alt"></i> Reports
                </a>
                <a href="#" class="nav-item" onclick="showContentScreen('settings')">
                    <i class="fas fa-cog"></i> Settings
                </a>
            </nav>

            <div class="sidebar-footer">
                <button class="btn btn-secondary btn-block" onclick="logoutCompany()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div id="dashboardScreen" class="content-screen active">
                <h1 class="page-title">Dashboard</h1>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-icon blue"><i class="fas fa-shopping-cart"></i></div>
                        <div class="card-info">
                            <h3>Total Sales</h3>
                            <p class="card-value" id="totalSales">₹0.00</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon green"><i class="fas fa-truck"></i></div>
                        <div class="card-info">
                            <h3>Total Purchase</h3>
                            <p class="card-value" id="totalPurchase">₹0.00</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon orange"><i class="fas fa-users"></i></div>
                        <div class="card-info">
                            <h3>Total Clients</h3>
                            <p class="card-value" id="totalClients">0</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon purple"><i class="fas fa-box"></i></div>
                        <div class="card-info">
                            <h3>Total Products</h3>
                            <p class="card-value" id="totalProducts">0</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-charts">
                    <div class="chart-container">
                        <h3>Recent Invoices</h3>
                        <div id="recentInvoices" class="data-table-container"></div>
                    </div>
                </div>
            </div>

            <div id="productsScreen" class="content-screen">
                <div class="screen-header">
                    <h1 class="page-title">Products</h1>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="productSearchInput" class="form-control" placeholder="Search products..." style="width: 300px;" onkeyup="filterProducts()">
                        <button class="btn btn-primary" onclick="showAddProductModal()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="productsTable">
                        <thead>
                            <tr>
                                <th>Product Code</th>
                                <th>Product Name</th>
                                <th>Category</th>
                                <th>Unit Per Box</th>
                                <th>Price Per Unit</th>
                                <th>Price Per Box</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="clientsScreen" class="content-screen">
                <div class="screen-header">
                    <h1 class="page-title">Clients</h1>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="clientSearchInput" class="form-control" placeholder="Search clients..." style="width: 300px;" onkeyup="filterClients()">
                        <button class="btn btn-primary" onclick="showAddClientModal()">
                            <i class="fas fa-plus"></i> Add Client
                        </button>
                    </div>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="clientsTable">
                        <thead>
                            <tr>
                                <th>Client Code</th>
                                <th>Client Name</th>
                                <th>Contact</th>
                                <th>Email</th>
                                <th>Balance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="vendorsScreen" class="content-screen">
                <div class="screen-header">
                    <h1 class="page-title">Vendors</h1>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="vendorSearchInput" class="form-control" placeholder="Search vendors..." style="width: 300px;" onkeyup="filterVendors()">
                        <button class="btn btn-primary" onclick="showAddVendorModal()">
                            <i class="fas fa-plus"></i> Add Vendor
                        </button>
                    </div>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="vendorsTable">
                        <thead>
                            <tr>
                                <th>Vendor Code</th>
                                <th>Vendor Name</th>
                                <th>Contact</th>
                                <th>Email</th>
                                <th>Balance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="vendorsTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="salesScreen" class="content-screen">
                <div class="screen-header">
                    <h1 class="page-title">Sales Invoice</h1>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="invoiceSearchInput" class="form-control" placeholder="Search invoices..." style="width: 300px;" onkeyup="filterInvoices()">
                        <button class="btn btn-primary" onclick="showAddInvoiceModal()">
                            <i class="fas fa-plus"></i> New Invoice
                        </button>
                        <button class="btn btn-secondary" onclick="showRestoreInvoiceModal()" title="Restore recently deleted invoices">
                            <i class="fas fa-undo"></i> Restore Deleted
                        </button>
                    </div>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="invoicesTable">
                        <thead>
                            <tr>
                                <th>Invoice No</th>
                                <th>Date</th>
                                <th>Client</th>
                                <th>Amount</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="invoicesTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="purchaseScreen" class="content-screen">
                <div class="screen-header">
                    <h1 class="page-title">Purchase</h1>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="purchaseSearchInput" class="form-control" placeholder="Search purchases..." style="width: 300px;" onkeyup="filterPurchases()">
                        <button class="btn btn-primary" onclick="showAddPurchaseModal()">
                            <i class="fas fa-plus"></i> New Purchase
                        </button>
                    </div>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="purchaseTable">
                        <thead>
                            <tr>
                                <th>Purchase No</th>
                                <th>Date</th>
                                <th>Vendor</th>
                                <th>Amount</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="purchaseTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="paymentsScreen" class="content-screen">
                <div class="screen-header">
                    <h1 class="page-title">Payments</h1>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="paymentSearchInput" class="form-control" placeholder="Search payments..." style="width: 300px;" onkeyup="filterPayments()">
                        <button class="btn btn-primary" onclick="showAddPaymentModal()">
                            <i class="fas fa-plus"></i> Add Payment
                        </button>
                    </div>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="paymentsTable">
                        <thead>
                            <tr>
                                <th>Payment No</th>
                                <th>Date</th>
                                <th>Client/Vendor</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="paymentsTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="reportsScreen" class="content-screen">
                <h1 class="page-title">Reports</h1>
                <div class="reports-grid">
                    <div class="report-card" onclick="showProductReport()">
                        <i class="fas fa-box"></i>
                        <h3>Product Report</h3>
                        <p>View product-wise sales report</p>
                    </div>
                    <div class="report-card" onclick="showSalesLedger()">
                        <i class="fas fa-file-invoice"></i>
                        <h3>Sales Ledger</h3>
                        <p>View client-wise sales ledger</p>
                    </div>
                    <div class="report-card" onclick="showPurchaseLedger()">
                        <i class="fas fa-truck"></i>
                        <h3>Purchase Ledger</h3>
                        <p>View vendor-wise purchase ledger</p>
                    </div>
                    <div class="report-card" onclick="showPaymentReport()">
                        <i class="fas fa-money-check"></i>
                        <h3>Payment Report</h3>
                        <p>View payment transactions</p>
                    </div>
                    <div class="report-card" onclick="showAccountLedger()">
                        <i class="fas fa-book"></i>
                        <h3>Account Ledger</h3>
                        <p>View account statements</p>
                    </div>
                    <div class="report-card" onclick="showExportData()">
                        <i class="fas fa-file-excel"></i>
                        <h3>Export Data</h3>
                        <p>Export to Excel</p>
                    </div>
                </div>
            </div>

            <div id="settingsScreen" class="content-screen">
                <h1 class="page-title">Settings</h1>
                <div class="settings-container">
                    <div class="settings-section">
                        <h3>Company Settings</h3>
                        <button class="btn btn-secondary" onclick="editCompanySettings()">
                            <i class="fas fa-edit"></i> Edit Company Info
                        </button>
                    </div>
                    <div class="settings-section">
                        <h3>Invoice & Report Templates</h3>
                        <button class="btn btn-secondary" onclick="showTemplateSettings()">
                            <i class="fas fa-file-invoice"></i> Configure Templates
                        </button>
                    </div>
                    <div class="settings-section">
                        <h3>Financial Year</h3>
                        <button class="btn btn-secondary" onclick="showFinancialYearSettings()">
                            <i class="fas fa-calendar"></i> Manage Financial Years
                        </button>
                    </div>
                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <button class="btn btn-secondary" onclick="backupData()">
                            <i class="fas fa-download"></i> Backup Data
                        </button>
                        <button class="btn btn-secondary" onclick="restoreData()">
                            <i class="fas fa-upload"></i> Restore Data
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modalContainer"></div>

    <script src="app.js"></script>
</body>
</html>
